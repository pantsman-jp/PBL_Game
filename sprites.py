# sprites.py
# -*- coding: utf-8 -*-
"""
8x8ドットキャラクター定義（pygame用）

- 各スプライトは 8x8 の色インデックス配列
- 0 は透明（描画しない）
- draw_sprite(surface, name, x, y, scale) で描画
"""

import pygame

# パレット（かわいい系色味）
PALETTE = {
    0: (0, 0, 0),  # transparent (使わない)
    1: (30, 30, 30),  # dark / outline
    2: (90, 60, 40),  # brown hair
    3: (247, 220, 180),  # skin light
    4: (40, 30, 20),  # eyes
    5: (80, 140, 220),  # blue cloth
    6: (220, 80, 80),  # red / bandana
    7: (250, 250, 250),  # white
    8: (250, 200, 90),  # yellow / gold
    9: (120, 200, 140),  # green cloth
    10: (150, 120, 220),  # purple / hat
    11: (200, 160, 120),  # warm brown cloth
    14: (240, 160, 200),  # pink
}

# 九工大生（主人公）
SPR_KYUKODAI = [
    [0, 2, 2, 2, 2, 2, 2, 0],
    [2, 2, 2, 2, 2, 2, 2, 2],
    [2, 3, 3, 3, 3, 3, 3, 2],
    [2, 3, 4, 3, 3, 4, 3, 2],
    [2, 3, 3, 3, 3, 3, 3, 2],
    [0, 5, 5, 5, 5, 5, 5, 0],
    [0, 5, 5, 0, 0, 5, 5, 0],
    [0, 5, 0, 0, 0, 0, 5, 0],
]

# カイ（アフリカ船乗り）
SPR_KAI = [
    [0, 6, 6, 6, 6, 6, 6, 0],
    [6, 6, 6, 6, 6, 6, 6, 6],
    [6, 3, 3, 3, 3, 3, 3, 6],
    [6, 3, 4, 3, 3, 4, 3, 6],
    [6, 3, 3, 3, 3, 3, 3, 6],
    [0, 9, 9, 9, 9, 9, 9, 0],
    [0, 9, 9, 0, 0, 9, 9, 0],
    [0, 9, 0, 0, 0, 0, 9, 0],
]

# ジャック（オーストラリア鉱夫）
SPR_JAKKU = [
    [0, 10, 10, 10, 10, 10, 10, 0],
    [10, 10, 10, 10, 10, 10, 10, 10],
    [10, 3, 3, 3, 3, 3, 3, 10],
    [10, 3, 4, 3, 3, 4, 3, 10],
    [10, 3, 3, 3, 3, 3, 3, 10],
    [0, 11, 11, 11, 11, 11, 11, 0],
    [0, 11, 11, 0, 0, 11, 11, 0],
    [0, 11, 0, 0, 0, 0, 11, 0],
]

# ルシオ（ブラジル・ゴム）
SPR_RUSHIO = [
    [0, 9, 9, 9, 9, 9, 9, 0],
    [9, 9, 9, 9, 9, 9, 9, 9],
    [9, 3, 3, 3, 3, 3, 3, 9],
    [9, 3, 4, 3, 3, 4, 3, 9],
    [9, 3, 3, 3, 3, 3, 3, 9],
    [0, 9, 9, 9, 9, 9, 9, 0],
    [0, 9, 9, 0, 0, 9, 9, 0],
    [0, 9, 0, 0, 0, 0, 9, 0],
]

# イワノフ（ロシア・金属）
SPR_IWANOFU = [
    [0, 1, 1, 1, 1, 1, 1, 0],
    [1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 3, 3, 3, 3, 3, 1],
    [1, 3, 4, 3, 3, 4, 3, 1],
    [1, 3, 3, 3, 3, 3, 3, 1],
    [0, 5, 5, 5, 5, 5, 5, 0],
    [0, 5, 5, 0, 0, 5, 5, 0],
    [0, 5, 0, 0, 0, 0, 5, 0],
]

# クラウス博士（ドイツ・燃料）
SPR_KURAUSU = [
    [0, 1, 1, 1, 1, 1, 1, 0],
    [1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 3, 3, 3, 3, 3, 1],
    [1, 3, 4, 3, 3, 4, 3, 1],
    [1, 3, 3, 3, 3, 3, 3, 1],
    [0, 7, 7, 7, 7, 7, 7, 0],
    [0, 7, 7, 0, 0, 7, 7, 0],
    [0, 7, 0, 0, 0, 0, 7, 0],
]

# リサ
SPR_RISA = [
    [0, 14, 14, 14, 14, 14, 14, 0],
    [14, 14, 14, 14, 14, 14, 14, 14],
    [14, 3, 3, 3, 3, 3, 3, 14],
    [14, 3, 4, 3, 3, 4, 3, 14],
    [14, 3, 3, 3, 3, 3, 3, 14],
    [0, 6, 6, 6, 6, 6, 6, 0],
    [0, 6, 6, 0, 0, 6, 6, 0],
    [0, 6, 0, 0, 0, 0, 6, 0],
]

# パティル博士
SPR_PATIRU = [
    [0, 2, 2, 2, 2, 2, 2, 0],
    [2, 2, 2, 2, 2, 2, 2, 2],
    [2, 3, 3, 3, 3, 3, 3, 2],
    [2, 4, 3, 3, 3, 3, 4, 2],
    [2, 3, 3, 3, 3, 3, 3, 2],
    [0, 7, 7, 7, 7, 7, 7, 0],
    [0, 7, 7, 0, 0, 7, 7, 0],
    [0, 7, 0, 0, 0, 0, 7, 0],
]

# アニル
SPR_ANIRU = [
    [0, 1, 1, 1, 1, 1, 1, 0],
    [1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 3, 3, 3, 3, 3, 1],
    [1, 3, 4, 3, 3, 4, 3, 1],
    [1, 3, 3, 3, 3, 3, 3, 1],
    [0, 6, 6, 6, 6, 6, 6, 0],
    [0, 6, 6, 0, 0, 6, 6, 0],
    [0, 6, 0, 0, 0, 0, 6, 0],
]

CHAR_SPRITES = {
    "kyukodai": SPR_KYUKODAI,
    "kai": SPR_KAI,
    "jakku": SPR_JAKKU,
    "rushio": SPR_RUSHIO,
    "iwanofu": SPR_IWANOFU,
    "kurausu": SPR_KURAUSU,
    "risa": SPR_RISA,
    "patiru": SPR_PATIRU,
    "aniru": SPR_ANIRU,
}


def draw_sprite(
    surface: pygame.Surface, name: str, x: int, y: int, scale: int = 4
) -> None:
    """
    キャラクター名に対応する8x8スプライトを描画する。

    Parameters
    ----------
    surface : pygame.Surface
        描画先
    name : str
        CHAR_SPRITESのキー
    x, y : int
        左上座標
    scale : int
        拡大率
    """
    data = CHAR_SPRITES.get(name)
    if data is None:
        return

    for row in range(8):
        for col in range(8):
            c = data[row][col]
            if c == 0:
                continue
            color = PALETTE.get(c, (255, 0, 255))
            rect = (x + col * scale, y + row * scale, scale, scale)
            pygame.draw.rect(surface, color, rect)
